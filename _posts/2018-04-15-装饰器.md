---
layout: post
title: "装饰器"
subtitle: ""
date: 2018-04-15
author: "zlk"
catalog: true
tags:
  - 装饰器
---

### 装饰器以一个函数的形式实现

### 装饰器如何达成目的

1. 通过返回值
2. 直接修改对象
3. 随意想象

### 装饰器可以应用在哪些对象上

- 类
- 类成员
- 原型链成员
- 实例成员

### 应用在不同对象上，装饰器接收的参数有何不同

- 类
  - 输入: 装饰器接受一个参数，即需要装饰的类
  - 输出: 返回类
- 类成员 或者叫静态成员
  - 输入: 两个参数，第一个参数是类，第二个参数成员名字
  - 输出: 不需要返回值，有返回值也会被忽略，如果我们需要修改某一个静态属性，可以自己获取通过 Object.getOwnPropertyDescriptor 获取 descriptor
- 原型链成员,即函数
  - 输入: 三个参数，第一个参数是类的原型对象，第二个参数成员名字，第三个参数是成员描述对象，即 descriptor
  - 输出: 如果方法装饰器返回一个值，它会被用作方法的属性描述符
- 实例成员
  - 输入: 两个参数，第一个参数的是类的原型对象，第二个参数是成员名字，没有第三个参数，因为没有 new 之前，这个实例对象不存在，实例成员也不存在，实例成员的 descriptor 更不存在
  - 输出: 不需要返回值，有返回值也会被忽略

### 装饰器的执行时机

- 装饰器对类的行为的改变，是代码编译时发生的，而不是在运行时

1. 类的装饰器是什么时候执行，是每次使用这个类执行一次？还是只执行一次？

2. 属性的装饰器什么时候执行？

3. 函数的装饰器什么时候执行？

4. 利用装饰器我们可以实现什么？

-
